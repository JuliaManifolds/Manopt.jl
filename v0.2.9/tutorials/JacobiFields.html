<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>use Jacobi Fields · Manopt.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../index.html"><img src="../assets/logo.png" alt="Manopt.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">Manopt.jl</span></div><form class="docs-search" action="../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Home</a></li><li><a class="tocitem" href="../about.html">About</a></li><li><span class="tocitem">How to...</span><ul><li><a class="tocitem" href="MeanAndMedian.html">get Started: Optimize!</a></li><li><a class="tocitem" href="BezierCurves.html">work with Bézier curves</a></li><li><a class="tocitem" href="GradientOfSecondOrderDifference.html">see the gradient of <span>$d_2$</span></a></li><li class="is-active"><a class="tocitem" href="JacobiFields.html">use Jacobi Fields</a><ul class="internal"><li><a class="tocitem" href="#Literature-1"><span>Literature</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../plans/index.html">Plans</a></li><li><span class="tocitem">Solvers</span><ul><li><a class="tocitem" href="../solvers/index.html">Introduction</a></li><li><a class="tocitem" href="../solvers/conjugate_gradient_descent.html">Conjugate gradient descent</a></li><li><a class="tocitem" href="../solvers/cyclic_proximal_point.html">Cyclic Proximal Point</a></li><li><a class="tocitem" href="../solvers/DouglasRachford.html">Douglas–Rachford</a></li><li><a class="tocitem" href="../solvers/gradientDescent.html">Gradient Descent</a></li><li><a class="tocitem" href="../solvers/NelderMead.html">Nelder–Mead</a></li><li><a class="tocitem" href="../solvers/particle_swarm.html">Particle Swarm Optimization</a></li><li><a class="tocitem" href="../solvers/subgradient.html">Subgradient method</a></li><li><a class="tocitem" href="../solvers/truncated_conjugate_gradient_descent.html">Steihaug-Toint TCG Method</a></li><li><a class="tocitem" href="../solvers/trust_regions.html">Riemannian Trust-Regions Solver</a></li></ul></li><li><span class="tocitem">Functions</span><ul><li><a class="tocitem" href="../functions/index.html">Introduction</a></li><li><a class="tocitem" href="../functions/bezier.html">Bézier curves</a></li><li><a class="tocitem" href="../functions/costFunctions.html">Cost functions</a></li><li><a class="tocitem" href="../functions/differentials.html">Differentials</a></li><li><a class="tocitem" href="../functions/adjointDifferentials.html">Adjoint Differentials</a></li><li><a class="tocitem" href="../functions/gradients.html">Gradients</a></li><li><a class="tocitem" href="../functions/jacobiFields.html">JacobiFields</a></li><li><a class="tocitem" href="../functions/proximalMaps.html">Proximal Maps</a></li><li><a class="tocitem" href="../functions/manifold.html">Specific manifold functions</a></li></ul></li><li><span class="tocitem">Helpers</span><ul><li><a class="tocitem" href="../helpers/data.html">Data</a></li><li><a class="tocitem" href="../helpers/errorMeasures.html">Error Measures</a></li><li><a class="tocitem" href="../helpers/exports.html">Exports</a></li></ul></li><li><a class="tocitem" href="../list.html">Function Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">How to...</a></li><li class="is-active"><a href="JacobiFields.html">use Jacobi Fields</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="JacobiFields.html">use Jacobi Fields</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaManifolds/Manopt.jl/blob/master/src/tutorials/JacobiFields.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Illustration-of-Jacobi-Fields-1"><a class="docs-heading-anchor" href="#Illustration-of-Jacobi-Fields-1">Illustration of Jacobi Fields</a><a class="docs-heading-anchor-permalink" href="#Illustration-of-Jacobi-Fields-1" title="Permalink"></a></h1><p>This tutorial illustrates the usage of Jacobi Fields within <code>Manopt.jl</code>. For this tutorial you should be familiar with the basic terminology on a manifold like the exponential and logarithmic map as well as <a href="https://juliamanifolds.github.io/Manifolds.jl/stable/interface.html#ManifoldsBase.shortest_geodesic-Tuple{Manifold,Any,Any}">shortest geodesic</a>s.</p><p>We first initialize the manifold</p><pre><code class="language-julia">exportFolder = joinpath(
    @__DIR__, &quot;..&quot;, &quot;..&quot;, &quot;docs&quot;, &quot;src&quot;, &quot;assets&quot;, &quot;images&quot;, &quot;tutorials&quot;
using Manopt, Manifolds</code></pre><p>and we define some colors from <a href="https://personal.sron.nl/~pault/">Paul Tol</a></p><pre><code class="language-julia">using Colors
black = RGBA{Float64}(colorant&quot;#000000&quot;)
TolVibrantOrange = RGBA{Float64}(colorant&quot;#EE7733&quot;)
TolVibrantCyan = RGBA{Float64}(colorant&quot;#33BBEE&quot;)
TolVibrantTeal = RGBA{Float64}(colorant&quot;#009988&quot;)</code></pre><p>Assume we have two points on the equator of the <a href="https://juliamanifolds.github.io/Manifolds.jl/stable/manifolds/sphere.html">Sphere</a> <span>$\mathcal M = \mathbb S^2$</span></p><pre><code class="language-">M = Sphere(2)
p, q = [[1.0, 0.0, 0.0], [0.0, 1.0, 0.0]]</code></pre><p>their connecting <a href="https://juliamanifolds.github.io/Manifolds.jl/stable/interface.html#ManifoldsBase.shortest_geodesic-Tuple{Manifold,Any,Any}">shortest geodesic</a> (sampled at <code>100</code> points)</p><pre><code class="language-">geodesicCurve = shortest_geodesic(M, p, q, [0:0.1:1.0...]);
nothing #hide</code></pre><p>looks as follows using the <a href="../helpers/exports.html#Manopt.asymptote_export_S2_signals-Tuple{String}"><code>asymptote_export_S2_signals</code></a> export</p><pre><code class="language-julia">asymptote_export_S2_signals(&quot;jacobiGeodesic.asy&quot;;
    render = asyResolution,
    curves=[geodesicCurve], points = [ [x,y] ],
    colors=Dict(:curves =&gt; [black], :points =&gt; [TolVibrantOrange]),
    dotSize = 3.5, lineWidth = 0.75, cameraPosition = (1.,1.,.5)
)
render_asymptote(&quot;jacobiGeodesic.asy&quot;; render = 2)</code></pre><p><img src="../assets/images/tutorials/jacobiGeodesic.png" alt="A geodesic connecting two points on the equator"/></p><p>where <span>$x$</span> is on the left. Then this tutorial solves the following task:</p><p>Given a direction <span>$X_p∈ T_x\mathcal M$</span>, for example</p><pre><code class="language-julia">X = [0.0, 0.4, 0.5]</code></pre><pre><code class="language-none">3-element Array{Float64,1}:
 0.0
 0.4
 0.5</code></pre><p>we move the start point <span>$x$</span> into, how does any point on the geodesic move?</p><p>Or mathematically: Compute <span>$D_p g(t; p,q)$</span> for some fixed <span>$t∈[0,1]$</span> and a given direction <span>$X_p$</span>. Of course two cases are quite easy: For <span>$t=0$</span> we are in <span>$x$</span> and how <span>$x$</span> “moves” is already known, so <span>$D_x g(0;p,q) = X$</span>. On the other side, for <span>$t=1$</span>, <span>$g(1; p,q) = q$</span> which is fixed, so <span>$D_p g(1; p,q)$</span> is the zero tangent vector (in <span>$T_q\mathcal M$</span>).</p><p>For all other cases we employ a <a href="../functions/jacobiFields.html#Manopt.jacobi_field"><code>jacobi_field</code></a>, which is a (tangent) vector field along the <a href="https://juliamanifolds.github.io/Manifolds.jl/stable/interface.html#ManifoldsBase.shortest_geodesic-Tuple{Manifold,Any,Any}">shortest geodesic</a> given as follows: The <em>geodesic variation</em> <span>$\Gamma_{g,X}(s,t)$</span> is defined for some <span>$\varepsilon &gt; 0$</span> as</p><div>\[\Gamma_{g,X}(s,t):=\exp{\gamma_{p,X}(s)}[t\log_{g(s;p,X)}p],\qquad s∈(-\varepsilon,\varepsilon),\ t∈[0,1].\]</div><p>Intuitively we make a small step <span>$s$</span> into direction <span>$\xi$</span> using the geodesic <span>$g(\cdot; p,X)$</span> and from <span>$r=g(s; p,X)$</span> we follow (in <span>$t$</span>) the geodesic <span>$g(\cdot; r,q)$</span>. The corresponding Jacobi field~(J_{g,X}) along~(g(\cdot; p,q)) is given</p><div>\[J_{g,X}(t):=\frac{D}{\partial s}\Gamma_{g,X}(s,t)\Bigl\rvert_{s=0}$\]</div><p>which is an ODE and we know the boundary conditions <span>$J_{g,X}(0)=X$</span> and <span>$J_{g,X}(t) = 0$</span>. In symmetric spaces we can compute the solution, since the system of ODEs decouples, see for example <a href="#doCarmo1992">do Carmo</a>, Chapter 4.2. Within <code>Manopt.jl</code> this is implemented as <a href="../functions/jacobiFields.html#Manopt.jacobi_field"><code>jacobi_field</code></a><code>(M,p,q,t,X[,β])</code>, where the optional parameter (function) <code>β</code> specifies, which Jacobi field we want to evaluate and the one used here is the default.</p><p>We can hence evaluate that on the points on the geodesic at</p><pre><code class="language-julia">T = [0:0.1:1.0...]</code></pre><p>namely</p><pre><code class="language-">r = shortest_geodesic(M, p, q, T)
nothing #hide</code></pre><p>the geodesic moves as</p><pre><code class="language-">W = jacobi_field.(Ref(M), Ref(p), Ref(q), T, Ref(X))</code></pre><p>which can also be called using <a href="../functions/differentials.html#Manopt.differential_geodesic_startpoint-Union{Tuple{mT}, Tuple{mT,Any,Any,Any,Any}} where mT&lt;:ManifoldsBase.Manifold"><code>differential_geodesic_startpoint</code></a>. We can add to the image above by creating extended tangent vectors the include their base points</p><pre><code class="language-">V = [Tuple([a, b]) for (a, b) in zip(r, W)]</code></pre><p>and add that as one further set to the Asymptote export.</p><pre><code class="language-julia">asymptote_export_S2_signals(&quot;jacobiGeodesicdifferential_geodesic_startpoint.asy&quot;;
    render = asyResolution,
    curves=[geodesicCurve], points = [ [x,y], Z], tVectors = [Vx],
    colors=Dict(
        :curves =&gt; [black],
        :points =&gt; [TolVibrantOrange,TolVibrantCyan],
        :tvectors =&gt; [TolVibrantCyan]
    ),
    dotSizes = [3.5,2.], lineWidth = 0.75, cameraPosition = (1.,1.,.5)
)
render_asymptote(&quot;jacobiGeodesicdifferential_geodesic_startpoint.asy&quot;; render = 2)</code></pre><p><img src="../assets/images/tutorials/jacobiGeodesicdifferential_geodesic_startpoint.png" alt="A Jacobi field for \$D_xg(t,x,y)[\\eta]\$"/></p><p>If we further move the end point, too, we can derive that Differential in direction</p><pre><code class="language-">Xq = [0.2, 0.0, -0.5]
W2 = differential_geodesic_endpoint.(Ref(M), Ref(p), Ref(q), T, Ref(Xq))
V2 = [Tuple([a, b]) for (a, b) in zip(r, W2)]</code></pre><p>and we can combine both keeping the base point</p><pre><code class="language-">V3 = [Tuple([a, b]) for (a, b) in zip(r, W2 + W)]</code></pre><pre><code class="language-julia">asymptote_export_S2_signals(&quot;jacobiGeodesicResult.asy&quot;;
   render = asyResolution,
   curves=[geodesicCurve], points = [ [x,y], Z], tVectors = [Vx,Vy,Vb],
   colors=Dict(
       :curves =&gt; [black],
       :points =&gt; [TolVibrantOrange,TolVibrantCyan],
       :tvectors =&gt; [TolVibrantCyan,TolVibrantCyan,TolVibrantTeal]
  ),
  dotSizes = [3.5,2.], lineWidth = 0.75, cameraPosition = (1.,1.,0.)
)
render_asymptote(&quot;jacobiGeodesicResult.asy&quot;; render = 2)</code></pre><p><img src="../assets/images/tutorials/jacobiGeodesicResult.png" alt="A Jacobi field for the effect of two differentials (blue) in sum (teal)"/></p><h2 id="Literature-1"><a class="docs-heading-anchor" href="#Literature-1">Literature</a><a class="docs-heading-anchor-permalink" href="#Literature-1" title="Permalink"></a></h2><ul><li id="doCarmo1992">[<a>doCarmo1992</a>] do Carmo, M. P.:
   <emph>Riemannian Geometry</emph>, Mathematics: Theory & Applications,
   Birkhäuser Basel, 1992, ISBN: 0-8176-3490-8</li>
<li id="BergmannGousenbourger2018">[<a>BergmannGousenbourger2018</a>]
  Bergmann, R.; Gousenbourger, P.-Y.: <emph>A variational model for data
  fitting on manifolds by minimizing the acceleration of a Bézier curve</emph>,
  Frontiers in Applied Mathematics and Statistics, 2018.
  doi: <a href="https://dx.doi.org/10.3389/fams.2018.00059">10.3389/fams.2018.00059</a></li>
</ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="GradientOfSecondOrderDifference.html">« see the gradient of <span>$d_2$</span></a><a class="docs-footer-nextpage" href="../plans/index.html">Plans »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 30 October 2020 12:13">Friday 30 October 2020</span>. Using Julia version 1.4.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
